<div>
    <dl class="dl-horizontal">
        <dt>
            Employee ID:
        </dt>

        <dd id="EmployeeId" contenteditable="true">
            @Html.DisplayFor(model => model.EmployeeId)
        </dd>

        <dt>
            First Name:
        </dt>

        <dd id="FirstName" contenteditable="true">
            @Html.DisplayFor(model => model.FirstName)
        </dd>

        <dt>
            Last Name:
        </dt>

        <dd id="LastName" contenteditable="true">
            @Html.DisplayFor(model => model.LastName)
        </dd>

        <dt>
            Designation:
        </dt>

        <dd id="Designation" contenteditable="true">
            @Html.DisplayFor(model => model.Designation)
        </dd>

        <dt>
            Department:
        </dt>

        <dd id="Department" contenteditable="true">
            @Html.DisplayFor(model => model.Department)
        </dd>

        <dt>
            Phone Number:
        </dt>

        <dd id="PhoneNumber" contenteditable="true">
            @Html.DisplayFor(model => model.PhoneNumber)
        </dd>

        <dt>
            Email:
        </dt>

        <dd id="Email" contenteditable="true">
            @Html.DisplayFor(model => model.Email)
        </dd>

        <dt>
            Organization:
        </dt>

        <dd id="Organization" contenteditable="true">
            @Html.DisplayFor(model => model.Organization)
        </dd>

    </dl>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $(document).ready(function () {
            $('dd[contenteditable=true]').keypress(function (event) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '13') {
                    var id = $(this).attr('id');
                    var value = $(this).text();
                    $.ajax({
                        url: '@Url.Action("UpdateEmployeeDetail", "Employee")',
                        type: 'POST',
                        dataType: 'json',
                        data: { id: id, value: value },
                        success: function (data) {
                            console.log("Data updated successfully!");
                        },
                        error: function (error) {
                            console.log("Please, Try again !" + error);
                        }
                    });
                }
            });
        });
    </script>
}


@model EEIMS.Models.GetEmployeeDetailViewModel

@{
    ViewBag.Title = "Profile";
}

<h4>Profile Details</h4>

<hr />

@using (Html.BeginForm("UpdateEmployee", "Employee", FormMethod.Post, new { id = "employeeForm" }))
{
    <div>
        <dl class="dl-horizontal">
            <dt>
                Employee ID:
            </dt>

            <dd>
                @Html.TextBoxFor(model => model.EmployeeId, new { id = "EmployeeId", @readonly = "readonly" })
            </dd>

            <!-- Repeat for other fields -->

            <dt>
                Organization:
            </dt>

            <dd>
                @Html.TextBoxFor(model => model.Organization, new { id = "Organization" })
            </dd>

        </dl>
    </div>

    <input type="submit" value="Update" />
}

<p>
    @Html.ActionLink("Back", "Index", "Employee")
</p>


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $(document).ready(function () {
            $.ajax({
                url: '@Url.Action("GetEmployeeDetail", "Employee")',
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    $('#EmployeeId').val(data.EmployeeId);
                    $('#FirstName').val(data.FirstName);
                    // Repeat for other fields
                    $('#Organization').val(data.Organization);
                },
                error: function (error) {
                    console.log("Please, Try again !" + error);
                }
            });

            $('#employeeForm').on('submit', function (event) {
                event.preventDefault();

                $.ajax({
                    url: $(this).attr('action'),
                    type: $(this).attr('method'),
                    data: $(this).serialize(),
                    success: function (data) {
                        console.log(data);
                    },
                    error: function (error) {
                        console.log("Please, Try again !" + error);
                    }
                });
            });
        });
    </script>
}